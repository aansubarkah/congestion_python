DROP VIEW label_twitter;
CREATE VIEW label_twitter AS SELECT r.id AS raw_id, r.info, r.t_time, k.id AS kind_id, c.id AS classification_id, c.name AS classification_name, e.id AS respondent_id, e.name AS respondent_name FROM raws r LEFT JOIN respondents e ON r.respondent_id = e.id LEFT JOIN denominations d ON r.id = d.raw_id LEFT JOIN kinds k ON r.id = k.raw_id LEFT JOIN classifications c ON k.classification_id = c.id WHERE r.active = true AND d.id IS NULL ORDER BY r.t_time DESC;
DROP VIEW data_twitter_old;
CREATE VIEW data_twitter_old AS SELECT r.id AS raw_id, r.info, r.t_time, k.id AS kind_id, c.id AS classification_id, c.name AS classification_name, e.id AS respondent_id, e.name AS respondent_name FROM raws r LEFT JOIN respondents e ON r.respondent_id = e.id LEFT JOIN kinds k ON r.id = k.raw_id LEFT JOIN classifications c ON k.classification_id = c.id WHERE r.active = true ORDER BY r.t_time DESC;
DROP VIEW train_twitter;
CREATE VIEW train_twitter AS SELECT d.id as denomination_id, c.id AS classification_id, c.name AS classification_name, u.id AS user_id, u.username AS user_name, r.id AS raw_id, r.info, r.t_time, e.id AS respondent_id, e.name AS respondent_name FROM denominations d LEFT JOIN raws r ON r.id = d.raw_id LEFT JOIN classifications c ON d.classification_id = c.id LEFT JOIN users u ON d.user_id = u.id LEFT JOIN respondents e ON r.respondent_id = e.id WHERE d.active = true ORDER BY r.t_time DESC;
DROP VIEW data_kind;
CREATE VIEW data_kind AS SELECT r.id AS raw_id, r.info, r.t_time, k.id AS kind_id, k.classification_id AS at_classification_id, k.verified AS kind_verified, d.id AS denomination_id, d.classification_id AS mt_classification_id, c.id AS classification_id, c.name AS classification_name, e.id AS respondent_id, e.name AS respondent_name FROM raws r LEFT JOIN respondents e ON r.respondent_id = e.id LEFT JOIN kinds k ON r.id = k.raw_id LEFT JOIN denominations d ON r.id = d.raw_id LEFT JOIN classifications c ON k.classification_id = c.id WHERE r.active = true ORDER BY r.t_time DESC;
DROP VIEW label_kind;
CREATE VIEW label_kind AS SELECT r.id AS raw_id, r.info, r.t_time, k.id AS kind_id, k.classification_id AS at_classification_id, d.id AS denomination_id, d.classification_id AS mt_classification_id, c.id AS classification_id, c.name AS classification_name, e.id AS respondent_id, e.name AS respondent_name FROM raws r LEFT JOIN respondents e ON r.respondent_id = e.id LEFT JOIN kinds k ON r.id = k.raw_id LEFT JOIN denominations d ON r.id = d.raw_id LEFT JOIN classifications c ON d.classification_id = c.id WHERE r.active = true AND r.classifying = false ORDER BY r.t_time DESC;
DROP VIEW data_twitter;
CREATE VIEW data_twitter AS SELECT r.id AS raw_id, r.info, r.t_time, r.classifying, r.tagging, r.chunking, r.locating, k.id AS kind_id, k.classification_id AS at_classification_id, d.id AS denomination_id, d.classification_id AS mt_classification_id, c.id AS classification_id, c.name AS classification_name, e.id AS respondent_id, e.name AS respondent_name FROM raws r LEFT JOIN respondents e ON r.respondent_id = e.id LEFT JOIN kinds k ON r.id = k.raw_id LEFT JOIN denominations d ON r.id = d.raw_id LEFT JOIN classifications c ON k.classification_id = c.id WHERE r.active = true ORDER BY r.t_time DESC;
DROP VIEW data_word_old;
CREATE VIEW data_word_old AS SELECT r.id AS raw_id, r.info, r.t_time, k.id AS kind_id, k.classification_id AS classification_id, c.name AS classification_name, w.id AS word_id, w.sequence AS sequence, w.name AS word_name, t.id AS tag_id, t.name AS tag_name, t.description AS tag_description FROM raws r LEFT JOIN kinds k ON r.id = k.raw_id LEFT JOIN classifications c ON k.classification_id = c.id LEFT JOIN words w ON r.id = w.raw_id LEFT JOIN tags t ON w.tag_id = t.id WHERE r.active = true ORDER BY r.t_time DESC;
DROP VIEW data_syllable_old;
CREATE VIEW data_syllable_old AS SELECT r.id AS raw_id, r.info, r.t_time, k.id AS kind_id, k.classification_id AS classification_id, c.name AS classification_name, s.id AS syllable_id, s.sequence AS sequence, s.name AS syllable_name, t.id AS tag_id, t.name AS tag_name, t.description AS tag_description FROM raws r LEFT JOIN kinds k ON r.id = k.raw_id LEFT JOIN classifications c ON k.classification_id = c.id LEFT JOIN syllables s ON r.id = s.raw_id LEFT JOIN tags t ON s.tag_id = t.id WHERE r.active = true ORDER BY r.t_time DESC;
DROP VIEW data_word;
CREATE VIEW data_word AS SELECT r.id AS raw_id, r.info, r.t_time, k.id AS kind_id, k.classification_id AS classification_id, c.name AS classification_name, w.id AS word_id, w.sequence AS sequence, w.name AS word_name, t.id AS tag_id, t.name AS tag_name, t.description AS tag_description FROM words w LEFT JOIN raws r ON w.raw_id = r.id LEFT JOIN kinds k ON r.id = k.raw_id LEFT JOIN classifications c ON k.classification_id = c.id LEFT JOIN tags t ON w.tag_id = t.id WHERE w.active = true ORDER BY r.t_time DESC;
DROP VIEW data_syllable;
CREATE VIEW data_syllable AS SELECT r.id AS raw_id, r.info, r.t_time, k.id AS kind_id, k.classification_id AS classification_id, c.name AS classification_name, s.id AS syllable_id, s.sequence AS sequence, s.name AS syllable_name, s.verified, t.id AS tag_id, t.name AS tag_name, t.description AS tag_description FROM syllables s LEFT JOIN raws r ON s.raw_id = r.id LEFT JOIN kinds k ON r.id = k.raw_id LEFT JOIN classifications c ON k.classification_id = c.id LEFT JOIN tags t ON s.tag_id = t.id WHERE s.active = true ORDER BY r.t_time DESC;
DROP VIEW label_word;
CREATE VIEW label_word AS SELECT r.id AS raw_id, r.info, r.t_time, s.id AS syllable_id, s.sequence AS sequence, s.name AS syllable_name, t.id AS tag_id, t.name AS tag_name, t.description AS tag_description FROM syllables s LEFT JOIN raws r ON s.raw_id = r.id LEFT JOIN tags t ON s.tag_id = t.id WHERE r.active = true AND r.tagging = false ORDER BY r.t_time DESC;
DROP VIEW process_chunking;
CREATE VIEW process_chunking AS SELECT r.id AS raw_id, r.info, r.t_time, e.id AS respondent_id, e.name AS respondent_name, e.t_user_id, k.id AS kind_id, k.processed AS kind_processed, k.chunked AS kind_chunked, c.id AS classification_id, c.name AS classification_name FROM kinds k LEFT JOIN raws r ON k.raw_id = r.id LEFT JOIN respondents e ON r.respondent_id = e.id LEFT JOIN classifications c ON k.classification_id = c.id WHERE k.active = true ORDER BY r.t_time DESC;
DROP VIEW process_locating;
CREATE VIEW process_locating AS SELECT r.id AS raw_id, r.info, r.t_time, e.id AS respondent_id, e.name AS respondent_name, e.t_user_id, k.id AS kind_id, w.id AS word_id, w.sequence, w.name, t.id AS tag_id, t.name AS tag_name FROM words w LEFT JOIN raws r ON w.raw_id = r.id LEFT JOIN respondents e ON r.respondent_id = e.id LEFT JOIN kinds k ON r.id = k.raw_id LEFT JOIN tags t ON w.tag_id = t.id WHERE w.active = true AND k.processed = true AND k.chunked = false;
DROP VIEW data_chunk;
CREATE VIEW data_chunk AS SELECT r.id AS raw_id, r.info, r.t_time, e.id AS respondent_id, e.name AS respondent_name, c.id AS chunk_id, c.place, c.condition, c.weather FROM chunks c LEFT JOIN raws r ON c.raw_id = r.id LEFT JOIN respondents e ON r.respondent_id = e.id WHERE c.active = true ORDER BY r.t_time DESC;
DROP VIEW data_piece;
CREATE VIEW data_piece AS SELECT r.id AS raw_id, r.info, r.t_time, e.id AS respondent_id, e.name AS respondent_name, p.id AS piece_id, p.place, p.condition, p.weather, u.id AS user_id, u.username FROM pieces p LEFT JOIN raws r ON p.raw_id = r.id LEFT JOIN respondents e ON r.respondent_id = e.id LEFT JOIN users u ON p.user_id = u.id WHERE p.active = true ORDER BY r.t_time DESC;
DROP VIEW label_chunk;
CREATE VIEW label_chunk AS SELECT r.id AS raw_id, r.info, r.t_time, e.id AS respondent_id, e.name AS respondent_name, p.id AS piece_id, p.place, p.condition, p.weather FROM pieces p LEFT JOIN raws r ON p.raw_id = r.id LEFT JOIN respondents e ON r.respondent_id = e.id WHERE r.active = true AND r.chunking = false ORDER BY r.t_time DESC;
DROP VIEW data_spot;
CREATE VIEW data_spot AS SELECT r.id AS raw_id, r.info, r.t_time, e.id AS respondent_id, e.name AS respondent_name, c.id AS chunk_id, c.place, c.condition, c.weather, s.id AS spot_id, p.id AS place_id, p.name AS place_name, p.lat, p.lng, re.id AS regency_id, re.name AS regency_name, h.id AS hierarchy_id, h.name AS hierarchy_name, ca.id AS category_id, ca.name AS category_name, w.id AS weather_id, w.name AS weather_name FROM spots s LEFT JOIN chunks c ON s.chunk_id = c.id LEFT JOIN raws r ON s.raw_id = r.id LEFT JOIN respondents e ON r.respondent_id = e.id LEFT JOIN places p ON s.place_id = p.id LEFT JOIN regencies re ON p.regency_id = re.id LEFT JOIN hierarchies h ON re.hierarchy_id = h.id LEFT JOIN categories ca ON s.category_id = ca.id LEFT JOIN weather w ON s.weather_id = w.id WHERE s.active = true ORDER BY r.t_time DESC;
DROP VIEW label_spot;
CREATE VIEW label_spot AS SELECT r.id AS raw_id, r.info, r.t_time, e.id AS respondent_id, e.name AS respondent_name, p.id AS piece_id, p.place, p.condition, p.weather, s.id AS space_id, pa.id AS place_id, pa.name AS place_name, pa.lat, pa.lng, re.id AS regency_id, re.name AS regency_name, h.id AS hierarchy_id, h.name AS hierarchy_name, ca.id AS category_id, ca.name AS category_name, w.id AS weather_id, w.name AS weather_name FROM spaces s LEFT JOIN pieces p ON s.piece_id = p.id LEFT JOIN raws r ON s.raw_id = r.id LEFT JOIN respondents e ON r.respondent_id = e.id LEFT JOIN places pa ON s.place_id = pa.id LEFT JOIN regencies re ON pa.regency_id = re.id LEFT JOIN hierarchies h ON re.hierarchy_id = h.id LEFT JOIN categories ca ON s.category_id = ca.id LEFT JOIN weather w ON s.weather_id = w.id WHERE r.active = true AND r.locating = false ORDER BY r.t_time DESC;
DROP VIEW process_spot;
CREATE VIEW process_spot AS SELECT p.id AS place_id, p.name AS place_name, p.lat AS place_lat, p.lng AS place_lng, r.id AS regency_id, r.name AS regency_name, h.id AS hierarchy_id, h.name AS hierarchy_name FROM places p LEFT JOIN regencies r ON p.regency_id = r.id LEFT JOIN hierarchies h ON r.hierarchy_id = h.id WHERE p.active = true ORDER BY p.name ASC;
DROP VIEW process_spoting;
CREATE VIEW process_spoting AS SELECT r.id AS raw_id, r.info, r.t_time, e.id AS respondent_id, e.name AS respondent_name,e.region_id AS respondent_region_id, e.t_user_id, k.id AS kind_id, c.id AS chunk_id, c.place, c.condition, c.weather FROM chunks c LEFT JOIN raws r ON c.raw_id = r.id LEFT JOIN respondents e ON r.respondent_id = e.id LEFT JOIN kinds k ON r.id = k.raw_id WHERE c.active = true AND c.processed = false ORDER BY r.t_time DESC;
DROP VIEW process_label_chunk;
CREATE VIEW process_label_chunk AS SELECT r.id AS raw_id, r.info, r.t_time, e.id AS respondent_id, e.name AS respondent_name,e.region_id AS respondent_region_id, e.t_user_id, k.id AS kind_id, p.id AS piece_id, p.place, p.condition, p.weather FROM pieces p LEFT JOIN raws r ON p.raw_id = r.id LEFT JOIN respondents e ON r.respondent_id = e.id LEFT JOIN kinds k ON r.id = k.raw_id WHERE p.active = true AND p.processed = false ORDER BY r.t_time DESC;
DROP VIEW process_machining;
CREATE VIEW process_machining AS SELECT r.id AS raw_id, r.media, r.info, r.t_time, e.id AS respondent_id, e.name AS respondent_name, e.t_user_id, k.id AS kind_id, k.classification_id AS classification_id, c.name AS classification_name, p.id AS place_id, p.name AS place_name, ca.id AS category_id, ca.name AS category_name, w.id AS weather_id, w.name AS weather_name, s.id AS spot_id, s.score, ch.id AS chunk_id, ch.place, ch.condition, ch.weather FROM spots s LEFT JOIN raws r ON s.raw_id = r.id LEFT JOIN respondents e ON r.respondent_id = e.id LEFT JOIN kinds k ON r.id = k.raw_id LEFT JOIN classifications c ON k.classification_id = c.id LEFT JOIN places p ON s.place_id = p.id LEFT JOIN categories ca ON s.category_id = ca.id LEFT JOIN weather w ON s.weather_id = w.id LEFT JOIN chunks ch ON s.chunk_id = ch.id WHERE s.active = true AND s.processed = false ORDER BY r.t_time DESC;
DROP VIEW process_markering;
CREATE VIEW process_markering AS SELECT r.id AS raw_id, r.t_time, e.id AS respondent_id, e.name AS respondent_name, e.t_user_id, m.classification_id AS classification_id, c.name AS classification_name, p.id AS place_id, p.name AS place_name, p.lat, p.lng, ca.id AS category_id, ca.name AS category_name, w.id AS weather_id, w.name AS weather_name, s.id AS spot_id, s.score, '3' AS user_id, 'twitterrobot' AS username, m.id AS machine_id, m.media, m.info FROM machines m LEFT JOIN raws r ON m.raw_id = r.id LEFT JOIN respondents e ON r.respondent_id = e.id LEFT JOIN classifications c ON m.classification_id = c.id LEFT JOIN places p ON m.place_id = p.id LEFT JOIN categories ca ON m.category_id = ca.id LEFT JOIN weather w ON m.weather_id = w.id LEFT JOIN spots s ON m.spot_id = s.id WHERE m.active = true AND m.processed = false ORDER BY r.t_time DESC;
DROP VIEW process_mongoing;
CREATE VIEW process_mongoing AS SELECT r.id AS raw_id, r.media AS tweet_media, r.info AS tweet_text, r.t_time AS tweet_time, r.t_id AS tweet_id, r.url AS tweet_url, e.id AS respondent_id, e.t_user_id AS tweet_user_id, e.t_user_screen_name AS tweet_user_screen_name, e.official AS tweet_official, e.active AS respondent_active, e.tmc AS respondent_tmc, e.region_id AS respondent_region_id, e.name AS respondent_name, g.name AS respondent_region_name, u.id AS user_id, u.email AS user_email, m.id AS marker_id, m.info AS marker_info, m.created AS marker_created, m.lat AS marker_lat, m.lng AS marker_lng, c.id AS category_id, c.name AS category_name, w.id AS weather_id, w.name AS weather_name FROM markers m LEFT JOIN raws r ON m.raw_id = r.id LEFT JOIN respondents e ON m.respondent_id = e.id LEFT JOIN regions g ON e.region_id = g.id LEFT JOIN users u ON m.user_id = u.id LEFT JOIN categories c ON m.category_id = c.id LEFT JOIN weather w ON m.weather_id = w.id WHERE m.active = true AND m.exported = false ORDER BY r.t_time DESC;
DROP VIEW process_district;
CREATE VIEW process_district AS SELECT d.id AS district_id, d.name AS district_name, d.lat AS district_lat, d.lng AS district_lng, r.id AS regency_id, r.name AS regency_name, r.alias AS regency_alias, r.lat AS regency_lat, r.lng AS regency_lng, s.id AS state_id, s.name AS state_name, h.id AS hierarchy_id, h.name AS hierarchy_name, rr.id AS regency_region_id, re.id AS region_id, re.lat AS region_lat, re.lng AS region_lng, re.name AS region_name, re.description AS region_description FROM districts d LEFT JOIN regencies r ON d.regency_id = r.id LEFT JOIN states s ON r.state_id = s.id LEFT JOIN hierarchies h ON r.hierarchy_id = h.id LEFT JOIN regencies_regions rr ON r.id = rr.regency_id LEFT JOIN regions re ON rr.region_id = re.id ORDER BY r.name ASC;
DROP VIEW process_regency;
CREATE VIEW process_regency AS SELECT r.id AS regency_id, r.name AS regency_name, r.alias AS regency_alias, r.lat AS regency_lat, r.lng AS regency_lng, s.id AS state_id, s.name AS state_name, h.id AS hierarchy_id, h.name AS hierarchy_name, rr.id AS regency_region_id, re.id AS region_id, re.lat AS region_lat, re.lng AS region_lng, re.name AS region_name, re.description AS region_description FROM regencies r LEFT JOIN states s ON r.state_id = s.id LEFT JOIN hierarchies h ON r.hierarchy_id = h.id LEFT JOIN regencies_regions rr ON r.id = rr.regency_id LEFT JOIN regions re ON rr.region_id = re.id ORDER BY r.name ASC;

